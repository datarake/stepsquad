services:
  api:
    build: ./apps/api
    ports:
      - "8004:8080"
    environment:
      COMP_TZ: Europe/Bucharest
      GRACE_DAYS: "2"
      GCP_ENABLED: "false"
      PORT: "8080"
  web:
    build: ./apps/web
    ports:
      - "5173:5173"
    environment:
      VITE_API_BASE_URL: "http://localhost:8004"
    depends_on:
      - api
  workers:
    build: ./apps/workers
    environment:
      GCP_ENABLED: "false"
      GOOGLE_CLOUD_PROJECT: StepSquad
      BQ_DATASET: stepsquad
      PUBSUB_SUB_INGEST: steps.ingest.sub
      PORT: "8080"  # optional, for consistency
    depends_on:
      - api
